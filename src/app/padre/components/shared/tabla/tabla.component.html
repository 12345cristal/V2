<div class="tabla-container">
  <!-- Loading State -->
  <div class="tabla-loading" *ngIf="loading">
    <div class="spinner"></div>
    <p>Cargando datos...</p>
  </div>
  
  <!-- Table -->
  <div class="tabla-wrapper" *ngIf="!loading">
    <table 
      class="tabla"
      [class.tabla-striped]="striped"
      [class.tabla-hoverable]="hoverable">
      
      <!-- Table Head -->
      <thead>
        <tr>
          <th 
            *ngFor="let column of columns"
            [style.width]="column.width"
            [class.sortable]="column.sortable"
            (click)="onSort(column)">
            
            <div class="th-content">
              <span>{{ column.label }}</span>
              
              <span class="sort-icon" *ngIf="column.sortable">
                <i 
                  class="fas fa-sort"
                  *ngIf="sortKey !== column.key"></i>
                <i 
                  class="fas fa-sort-up"
                  *ngIf="sortKey === column.key && sortDirection === 'asc'"></i>
                <i 
                  class="fas fa-sort-down"
                  *ngIf="sortKey === column.key && sortDirection === 'desc'"></i>
              </span>
            </div>
          </th>
        </tr>
      </thead>
      
      <!-- Table Body -->
      <tbody>
        <tr 
          *ngFor="let row of paginatedData"
          (click)="onRowClick(row)">
          
          <td *ngFor="let column of columns">
            {{ row[column.key] }}
          </td>
        </tr>
        
        <!-- Empty State -->
        <tr *ngIf="paginatedData.length === 0" class="empty-row">
          <td [attr.colspan]="columns.length">
            <div class="empty-state">
              <i class="fas fa-inbox"></i>
              <p>{{ emptyMessage }}</p>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <!-- Pagination -->
  <div class="tabla-pagination" *ngIf="showPagination && totalPages > 1 && !loading">
    <div class="pagination-info">
      Mostrando {{ (currentPage - 1) * pageSize + 1 }} a 
      {{ Math.min(currentPage * pageSize, totalItems) }} de 
      {{ totalItems }} resultados
    </div>
    
    <div class="pagination-controls">
      <button 
        class="pagination-btn"
        [disabled]="currentPage === 1"
        (click)="onPageChange(currentPage - 1)">
        <i class="fas fa-chevron-left"></i>
      </button>
      
      <button 
        class="pagination-btn"
        *ngFor="let page of getPages()"
        [class.active]="page === currentPage"
        (click)="onPageChange(page)">
        {{ page }}
      </button>
      
      <button 
        class="pagination-btn"
        [disabled]="currentPage === totalPages"
        (click)="onPageChange(currentPage + 1)">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
