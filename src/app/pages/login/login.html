<app-header></app-header>

<div class="login-container">
  <div class="login-card">

    <!-- üåà Panel Izquierdo -->
    <div class="illustration">
      <div class="content">
        <img src="autismo_mochis.png" alt="Autismo Mochis" class="logo" />
        <h2>Bienvenido a Autismo Mochis</h2>
        <p>Gestiona usuarios, terapias y recursos desde una sola plataforma inteligente.</p>
      </div>
    </div>

    <!-- üß© Panel Formulario -->
    <div class="login-form-section">
      <h3>Iniciar sesi√≥n</h3>

      <form [formGroup]="loginForm" (ngSubmit)="login()" class="login-form">

        <!-- ================================
             ALERTA GLOBAL (BACKEND)
        ================================== -->
        @if (mensajeError() !== '') {
          <div class="alert alert-error">
            {{ mensajeError() }}
          </div>
        }

        <!-- ================================
             CAMPO CORREO
        ================================== -->
        <div class="form-group"
             [class.has-error]="loginForm.get('correo')?.invalid && loginForm.get('correo')?.touched">

          <label>Correo electr√≥nico</label>
          <input type="email" formControlName="correo" placeholder="ejemplo@correo.com">

          @if (loginForm.get('correo')?.touched && loginForm.get('correo')?.invalid) {
            <div class="field-error">
              @if (loginForm.get('correo')?.errors?.['required']) {
                El correo es obligatorio.
              }
              @else if (loginForm.get('correo')?.errors?.['email']) {
                Ingresa un correo v√°lido.
              }
            </div>
          }
        </div>

        <!-- ================================
             CAMPO CONTRASE√ëA
        ================================== -->
        <div class="form-group password-field"
             [class.has-error]="loginForm.get('contrasena')?.invalid && loginForm.get('contrasena')?.touched">

          <label>Contrase√±a</label>
          <input 
            [type]="mostrarPassword ? 'text' : 'password'"
            formControlName="contrasena"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

          <span class="toggle-password" (click)="togglePassword()">
            {{ mostrarPassword ? 'Ocultar' : 'Ver' }}
          </span>

          @if (loginForm.get('contrasena')?.touched && loginForm.get('contrasena')?.invalid) {
            <div class="field-error">
              @if (loginForm.get('contrasena')?.errors?.['required']) {
                La contrase√±a es obligatoria.
              }
              @else if (loginForm.get('contrasena')?.errors?.['minlength']) {
                M√≠nimo 6 caracteres.
              }
            </div>
          }
        </div>

        <div class="forgot">
          <a href="#">¬øOlvidaste tu contrase√±a?</a>
        </div>

        <button type="submit" [disabled]="loginForm.invalid">
          Ingresar
        </button>

      </form>
    </div>

  </div>
</div>

<app-footer></app-footer>
