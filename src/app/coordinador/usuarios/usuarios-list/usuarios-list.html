<div class="usuarios-table-wrapper">

  @if (usuarios.length === 0) {
  <div class="empty">
    <mat-icon>person_off</mat-icon>
    <p>No hay usuarios registrados</p>
  </div>
  } @else {

  <table class="usuarios-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre completo</th>
        <th>Email</th>
        <th>Rol</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>

    <tbody>
      @for (usuario of usuarios; track usuario.id_usuario) {
      <tr>
        <td>{{ usuario.id_usuario }}</td>
        <td>{{ usuario.nombre_completo }}</td>
        <td>{{ usuario.email }}</td>
        <td>
          <span class="badge-rol">
            {{ usuario.nombre_rol }}
          </span>
        </td>
        <td>
          <span
            class="badge-estado"
            [class.activo]="usuario.estado === 'ACTIVO'"
            [class.inactivo]="usuario.estado === 'INACTIVO'">
            {{ usuario.estado }}
          </span>
        </td>
        <td class="acciones">
          <button
            type="button"
            class="btn-icon editar"
            (click)="editar.emit(usuario)"
            title="Editar">
            <mat-icon>edit</mat-icon>
          </button>

          <button
            type="button"
            class="btn-icon estado"
            (click)="cambiarEstado.emit(usuario)"
            [title]="usuario.estado === 'ACTIVO' ? 'Desactivar' : 'Activar'">
            <mat-icon>
              {{ usuario.estado === 'ACTIVO' ? 'toggle_on' : 'toggle_off' }}
            </mat-icon>
          </button>
        </td>
      </tr>
      }
    </tbody>
  </table>

  }

</div>
