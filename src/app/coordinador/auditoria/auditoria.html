<div class="auditoria-wrapper">
  <h2>Auditoría del sistema</h2>

  <form class="filtros" (ngSubmit)="buscar()">
    <div>
      <label>Desde</label>
      <input type="date" [(ngModel)]="filtros.fechaDesde" name="fechaDesde" />
    </div>
    <div>
      <label>Hasta</label>
      <input type="date" [(ngModel)]="filtros.fechaHasta" name="fechaHasta" />
    </div>
    <div>
      <label>Usuario</label>
      <input type="text" [(ngModel)]="filtros.usuario" name="usuario" />
    </div>
    <div>
      <label>Módulo</label>
      <input type="text" [(ngModel)]="filtros.modulo" name="modulo" />
    </div>
    <div>
      <label>Acción</label>
      <input type="text" [(ngModel)]="filtros.accion" name="accion" />
    </div>
    <button type="submit">Buscar</button>
  </form>

  <div *ngIf="cargando">Cargando...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <table *ngIf="!cargando && registros.length">
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Usuario</th>
        <th>Rol</th>
        <th>Módulo</th>
        <th>Acción</th>
        <th>Descripción</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of registros">
        <td>{{ r.fecha | date:'short' }}</td>
        <td>{{ r.usuario }}</td>
        <td>{{ r.rol }}</td>
        <td>{{ r.modulo }}</td>
        <td>{{ r.accion }}</td>
        <td>{{ r.descripcion }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!cargando && !registros.length" class="vacio">
    Sin resultados.
  </div>
</div>
